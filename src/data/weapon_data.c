#include "../weapons.h"
#include "../action.h"
#include <stdio.h>

#define MAGIC 128
#define WEAPONS_COUNT 133
#define WEAPONS_FILENAME "weapon_data.dat"

int main(int argc, char* argv[]);


int a = sizeof(weapon_t);


/*
0 = nothing
1 to 12 = Broken weapons for each type
12 + (10 * (WEAPON_TYPE-1)) + (2 * (WEAPON_RANK -1)) + random(1,2) = Default weapons for rank and type
    Use formula (10 * WEAPON_TYPE) + (2 * (WEAPON_RANK-1)) + random(3, 4)
    Implement as WEAPON_TYPE -> *5 -> +WEAPON_RANK -> -1 -> *2 -> +rand()%2 -> +3 //ie random(0,1)
    ie 13 to 132 = default weapons for rank and type
    todo 4 more basic heavy weapons


*/
const weapon_t weapons[] = {
    // 0 = Nothing 
    (weapon_t){"Nothing", 
                -1, 0, 0, 0, 0, 1, 0, 0,
                ITEM, NO_RANK, 0, 0, 0, IS_NOTHING_FLAG, NO_WEAPON_ATTR, NO_WEAPON_ATTR,
    },
    // 1 = Broken Sword
    (weapon_t){"Broken Sword",
                -1, 0, 40, 0, 13, 1, 1, 0,
                SWORD, RANK_1, 0, 0, 1, IS_BROKEN_FLAG, NO_WEAPON_ATTR, NO_WEAPON_ATTR,
    },
    // 2 = Broken Axe
    (weapon_t){"Broken Axe",
                -1, 0, 30, 0, 14, 1, 1, 0,
                AXE, RANK_1, 0, 0, 1, IS_BROKEN_FLAG, NO_WEAPON_ATTR, NO_WEAPON_ATTR,
    },
    // 3 = Broken Lance
    (weapon_t){"Broken Lance",
                -1, 0, 40, 0, 13, 1, 1, 0,
                LANCE, RANK_1, 0, 0, 1, IS_BROKEN_FLAG, NO_WEAPON_ATTR, NO_WEAPON_ATTR,
    },
    // 4 = Broken Bow
    (weapon_t){"Broken Bow",
                -1, 0, 40, 0, 10, 1, 0, 0,
                BOW, RANK_1, 0, 0, 0, IS_BROKEN_FLAG, NO_WEAPON_ATTR, NO_WEAPON_ATTR,
    },
    // 5 = Ash (consumable heal)
    (weapon_t){"Ash",
                1, 0, 0, 0, 1, 1, 0, 10,
                ITEM, NO_RANK, 1, 0, 0, IS_BROKEN_FLAG, NO_WEAPON_ATTR, NO_WEAPON_ATTR,
    },
    // 6 = Broken Dagger
    (weapon_t){"Broken Dagger",
                -1, 0, 40, 0, 12, 1, 1, 0,
                DAGGER, RANK_1, 0, 0, 1, IS_BROKEN_FLAG, NO_WEAPON_ATTR, NO_WEAPON_ATTR,
    },
    // 7 = Broken Gauntlet
    (weapon_t){"Worn Gloves",
                -1, 0, 40, 0, 12, 1, 1, 0,
                GAUNTLET, RANK_1, 0, 0, 1, IS_BROKEN_FLAG, NO_WEAPON_ATTR, NO_WEAPON_ATTR,
    },
    // 8 = Nothing 
    (weapon_t){"Nothing", 
                -1, 0, 0, 0, 0, 1, 0, 0,
                ITEM, NO_RANK, 0, 0, 0, IS_NOTHING_FLAG, NO_WEAPON_ATTR, NO_WEAPON_ATTR,
    },
    // 9 = Book (light) 
    (weapon_t){"Book",
                -1, 0, 0, 0, 9, 1, 1, 0,
                LIGHT_M, NO_RANK, 0, 0, 0, IS_BROKEN_FLAG, NO_WEAPON_ATTR, NO_WEAPON_ATTR,
    },
    // 10 = Book (dark)
    (weapon_t){"Book",
                -1, 0, 0, 0, 8, 1, 1, 0,
                DARK_M, NO_RANK, 0, 0, 0, IS_BROKEN_FLAG, NO_WEAPON_ATTR, NO_WEAPON_ATTR,
    },
    // 11 = Nothing 
    (weapon_t){"Nothing", 
                -1, 0, 0, 0, 0, 1, 0, 0,
                ITEM, NO_RANK, 0, 0, 0, IS_NOTHING_FLAG, NO_WEAPON_ATTR, NO_WEAPON_ATTR,
    },
    // 12 = Small Ash (consumable heal)
    (weapon_t){"Small Ash",
                1, 0, 0, 0, 1, 1, 0, 3,
                ITEM, NO_RANK, 1, 0, 0, IS_BROKEN_FLAG, NO_WEAPON_ATTR, NO_WEAPON_ATTR,
    },


    // 13 basic swords
    (weapon_t){"Iron Sword",
                45, 5, 90, 0, 5, 1, 1, 0,
                SWORD, RANK_1, 0, 0, 1, NO_WEAPON_ATTR, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Jagged Sword",
                40, 5, 80, 25, 7, 1, 1, 0,
                SWORD, RANK_1, 0, 0, 1, AT_LOW_HEALTH | CRIT_UP, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Heavy Sword",
                35, 8, 80, 0, 10, 1, 1, 0,
                SWORD, RANK_2, 0, 0, 1, E_ARMOUR, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Holy Sword",
                40, 7, 75, 0, 8, 1, 2, 0,
                SWORD, RANK_2, 0, 0, 1, E_DARK_M, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Magic Sword",
                35, 6 | MAGIC, 80, 0, 8, 1, 2, 0,
                SWORD, RANK_3, 0, 0, 1, NO_WEAPON_ATTR, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Sabre",
                30, 8, 80, 5, 6, 1, 1, 0,
                SWORD, RANK_3, 0, 0, 1, E_BOW, E_AXE, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Silver Sword",
                35, 9, 80, 0, 9, 1, 1, 0,
                SWORD, RANK_4, 0, 0, 1, NO_WEAPON_ATTR, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Armourslayer",
                30, 7, 85, 5, 7, 1, 1, 0,
                SWORD, RANK_4, 0, 0, 1, E_ARMOUR, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Golden Sword",
                25, 11, 80, 20, 11, 1, 1, 0,
                SWORD, RANK_5, 0, 0, 1, AT_LOW_HEALTH | TERRAIN_WARP_SWAMP, AT_LOW_HEALTH | APP_POISON, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Golden Blade",
                25, 12, 80, 20, 13, 1, 1, 0,
                SWORD, RANK_5, 0, 0, 1, AT_LOW_HEALTH | CRIT_UP, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },


    //23 basic axes
    (weapon_t){"Iron Axe",
                45, 8, 70, 0, 9, 1, 1, 0,
                AXE, RANK_1, 0, 0, 1, NO_WEAPON_ATTR, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Throwing Axe",
                35, 6, 65, 0, 11, 1, 2, 0,
                AXE, RANK_1, 0, 0, 1, NO_WEAPON_ATTR, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Rampage Axe",
                35, 8, 75, 0, 14, 1, 1, 0,
                AXE, RANK_2, 0, 0, 1, FURY, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Great Axe",
                40, 12, 65, 30, 13, 1, 1, 0,
                AXE, RANK_2, 0, 0, 1, NO_WEAPON_ATTR, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Tomohawk",
                35, 11, 70, 15, 13, 1, 2, 0,
                AXE, RANK_3, 0, 0, 1, NO_WEAPON_ATTR, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Storm Axe",
                30, 9, 75, 0, 10, 1, 1, 0,
                AXE, RANK_3, 0, 0, 1, SPLASH, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Silver Axe",
                35, 14, 75, 0, 13, 1, 1, 0,
                AXE, RANK_4, 0, 0, 1, E_LANCE, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Berserker Axe",
                30, 9, 75, 30, 10, 1, 1, 0,
                AXE, RANK_4, 0, 0, 1, NO_WEAPON_ATTR, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Golden Axe",
                25, 16, 70, 20, 14, 1, 1, 0,
                AXE, RANK_5, 0, 0, 1, AT_LOW_HEALTH | E_ARMOUR, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Gold Tomohawk",
                20, 13, 65, 20, 15, 1, 2, 0,
                AXE, RANK_5, 0, 0, 1, AT_LOW_HEALTH | ATT_UP, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },


    //33 basic lances
    (weapon_t){"Iron Lance",
                45, 6, 80, 0, 6, 1, 1, 0,
                LANCE, RANK_1, 0, 0, 1, NO_WEAPON_ATTR, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Swordcatcher",
                35, 7, 70, 0, 7, 1, 1, 0,
                LANCE, RANK_1, 0, 0, 1, E_SWORD, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Javelin",
                40, 7, 75, 0, 8, 1, 2, 0,
                LANCE, RANK_2, 0, 0, 1, NO_WEAPON_ATTR, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Beast-Slayer",
                40, 8, 70, 30, 12, 1, 1, 0,
                LANCE, RANK_2, 0, 0, 1, E_CAVALRY, E_FLYING, E_BREATH, 
    },
    (weapon_t){"Pike",
                35, 10, 70, 0, 13, 1, 1, 0,
                LANCE, RANK_3, 0, 0, 1, E_INFANTRY, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Slim Lance",
                40, 8, 90, 10, 10, 1, 1, 0,
                LANCE, RANK_3, 0, 0, 1, FAST, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Silver Lance",
                35, 12, 70, 0, 10, 1, 1, 0,
                LANCE, RANK_4, 0, 0, 1, NO_WEAPON_ATTR, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Spear",
                30, 9, 75, 10, 12, 1, 2, 0,
                LANCE, RANK_4, 0, 0, 1, NO_WEAPON_ATTR, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Golden Lance",
                25, 13, 65, 0, 9, 1, 1, 0,
                LANCE, RANK_5, 0, 0, 1, AT_LOW_HEALTH | E_INFANTRY, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Golden Spear",
                20, 10, 60, 10, 14, 1, 2, 0,
                LANCE, RANK_5, 0, 0, 1, AT_LOW_HEALTH | WINDSWEEP, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },


    //43 basic bows
    (weapon_t){"Iron Bow",
                45, 5, 85, 0, 6, 2, 2, 0,
                BOW, RANK_1, 0, 0, 1, E_FLYING, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Fast Bow",
                40, 5, 70, 0, 5, 2, 2, 0,
                BOW, RANK_1, 0, 0, 1, E_FLYING, QUICK_DRAW, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Triple Bow",
                40, 13, 60, 20, 12, 2, 2, 0,
                BOW, RANK_2, 0, 0, 1, E_FLYING, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Longbow",
                30, 5, 70, 0, 12, 2, 3, 0,
                BOW, RANK_2, 0, 0, 1, E_FLYING, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Light Bow",
                35, 7, 80, 0, 6, 2, 2, 0,
                BOW, RANK_3, 0, 0, 1, E_FLYING, QUICK_DRAW, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Wind Bow",
                40, 8 | MAGIC, 80, 5, 10, 2, 2, 0,
                BOW, RANK_3, 0, 0, 1, E_FLYING, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Silver Bow",
                35, 9, 80, 0, 10, 2, 2, 0,
                BOW, RANK_4, 0, 0, 1, E_FLYING, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Hunting Bow",
                45, 7, 85, 10, 7, 2, 2, 0,
                BOW, RANK_4, 0, 0, 1, E_FLYING, E_CAVALRY, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Golden Bow",
                20, 12, 80, 20, 11, 2, 2, 0,
                BOW, RANK_5, 0, 0, 1, E_FLYING, AT_LOW_HEALTH | QUICK_DRAW, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Brave Bow",
                25, 7, 85, 0, 9, 2, 2, 0,
                BOW, RANK_5, 0, 0, 1, E_FLYING, FRENZY, NO_WEAPON_ATTR, 
    },


    //53 basic breaths
    (weapon_t){"Flame Breath",
                -2, 7 | MAGIC, 80, 0, 8, 1, 2, 0,
                BREATH, RANK_1, 0, 0, 1, CORROSION, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Ice Breath",
                -2, 6 | MAGIC, 120, 0, 6, 1, 2, 0,
                BREATH, RANK_1, 0, 0, 1, E_BREATH, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Bolt Breath",
                -2, 6 | MAGIC, 65, 0, 8, 1, 2, 0,
                BREATH, RANK_2, 0, 0, 1, APP_FREEZE, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Dragon Rage",
                -2, 5 | MAGIC, 128, 0, 8, 1, 2, 0,
                BREATH, RANK_2, 0, 0, 1, AT_LOW_HEALTH | QUICK_DRAW, AT_LOW_HEALTH | FURY, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Water Breath",
                -2, 1 | MAGIC, 75, 5, 6, 1, 2, 0,
                BREATH, RANK_3, 0, 0, 1, IGNORE_DEF, E_EXPLOSIVE, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Misty Breath",
                -2, 10 | MAGIC, 85, 10, 13, 1, 2, 0,
                BREATH, RANK_3, 0, 0, 1, FRENZY, FURY, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Fierce Breath",
                -2, 14 | MAGIC, 128, 10, 8, 1, 2, 0,
                BREATH, RANK_4, 0, 0, 1, FAST, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Rocky Breath",
                -2, 15, 85, 10, 13, 1, 2, 0,
                BREATH, RANK_4, 0, 0, 1, NO_WEAPON_ATTR, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Last Breaths",
                10, 18 | MAGIC, 80, 0, 20, 1, 2, 50,
                BREATH, RANK_5, 1, 0, 1, CORROSION, E_BREATH, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Sacred Breath",
                -2, 16 | MAGIC, 80, 20, 12, 1, 2, 0,
                BREATH, RANK_5, 0, 0, 1, AT_LOW_HEALTH | SAP_HEALTH, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },


    //63 basic daggers
    (weapon_t){"Iron Dagger",
                45, 4, 90, 5, 4, 1, 2, 0,
                DAGGER, RANK_1, 0, 0, 1, DEBUFF_DEF1, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Poison Dagger",
                40, 3, 85, 0, 5, 1, 2, 0,
                DAGGER, RANK_1, 0, 0, 1, APP_POISON, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Gambit Dagger",
                45, 6, 80, 0, 6, 1, 2, 0,
                DAGGER, RANK_2, 0, 0, 1, CANNOT_COUNTER, FRENZY, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Fairy Dagger",
                40, 5 | MAGIC, 128, 0, 6, 1, 2, 0,
                DAGGER, RANK_2, 0, 0, 1, DEBUFF_DEF2, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Knife",
                40, 6, 75, 10, 4, 1, 1, 0,
                DAGGER, RANK_3, 0, 0, 1, DEBUFF_DEF3, E_GAUNTLET, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Blow Dart",
                20, 4, 75, 0, 4, 1, 2, 0,
                DAGGER, RANK_3, 0, 0, 1, DEBUFF_DEF2, APP_FREEZE, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Kurd",
                40, 5, 80, 30, 6, 1, 2, 0,
                DAGGER, RANK_4, 0, 0, 1, DEBUFF_DEF2, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Silver Dagger",
                25, 6, 75, 5, 6, 1, 2, 0,
                DAGGER, RANK_4, 0, 0, 1, DEBUFF_DEF3, APP_POISON, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Tranqilliser",
                35, 5, 80, 20, 6, 1, 1, 0,
                DAGGER, RANK_5, 0, 0, 1, DEBUFF_DEF3, E_CAVALRY, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Golden Dagger",
                20, 7, 70, 20, 8, 1, 2, 0,
                DAGGER, RANK_5, 0, 0, 1, DEBUFF_DEF3, APP_POISON, AT_LOW_HEALTH | CRIT_UP, 
    },


    //73 basic gauntlets
    (weapon_t){"Iron Fists",
                50, 2, 90, 0, 4, 1, 1, 0,
                GAUNTLET, RANK_1, 0, 0, 1, FRENZY, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Tome Breaker",
                30, 6, 80, 0, 6, 1, 1, 0,
                GAUNTLET, RANK_1, 0, 0, 1, E_LIGHT_M, E_DARK_M, E_STAFF, 
    },
    (weapon_t){"Heavy Gauntlet",
                45, 10, 75, 0, 13, 1, 1, 0,
                GAUNTLET, RANK_2, 0, 0, 1, NO_WEAPON_ATTR, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Light Gauntlet",
                40, 3, 80, 0, 7, 1, 1, 0,
                GAUNTLET, RANK_2, 0, 0, 1, FRENZY, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Boxing Gloves",
                40, 8, 70, 15, 6, 1, 1, 0,
                GAUNTLET, RANK_3, 0, 0, 1, NO_WEAPON_ATTR, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Shadow Gloves",
                35, 1, 75, 0, 9, 1, 1, 0,
                GAUNTLET, RANK_3, 0, 0, 1, IGNORE_DEF, SLOW_DRAW, NO_WEAPON_ATTR,
    },
    (weapon_t){"Fists",
                -2, 4, 65, 50, 0, 1, 1, 0,
                GAUNTLET, RANK_4, 0, 0, 1, NO_WEAPON_ATTR, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Silver Gloves",
                30, 5, 75, 5, 12, 1, 1, 0,
                GAUNTLET, RANK_4, 0, 0, 1, FRENZY, NO_WEAPON_ATTR, NO_WEAPON_ATTR,
    },
    (weapon_t){"Sneaky Punch",
                -2, 1, 65, 0, 8, 1, 1, 0,
                GAUNTLET, RANK_5, 0, 0, 1, WINDSWEEP, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Golden Gloves",
                25, 7, 75, 20, 13, 1, 1, 0,
                GAUNTLET, RANK_5, 0, 0, 1, FRENZY, AT_LOW_HEALTH | E_ARMOUR, NO_WEAPON_ATTR,
    },


    //83 basic staves
    (weapon_t){"Heal",
                45, MAGIC, 128, 0, 1, 1, 1, 5,
                STAFF, RANK_1, 0, 1, 0, NO_WEAPON_ATTR, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Rescue",
                10, MAGIC, 128, 0, 4, 1, 1, 3,
                STAFF, RANK_1, 0, 1, 0, RESCUE, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Great Heal",
                25, MAGIC, 128, 0, 7, 1, 5, 10,
                STAFF, RANK_2, 1, 1, 0, NO_WEAPON_ATTR, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Speed Staff",
                25, MAGIC, 128, 0, 7, 1, 5, 3,
                STAFF, RANK_2, 0, 1, 0, APP_PASS, BUFF_SPD, BUFF_MOV, 
    },
    (weapon_t){"Revitalise",
                10, MAGIC, 128, 0, 9, 1, 1, 1,
                STAFF, RANK_3, 0, 1, 0, AGAIN, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Anger",
                10, MAGIC, 128, 0, 6, 1, 5, 5,
                STAFF, RANK_3, 0, 1, 0, BUFF_ATT, BUFF_MGC, NO_WEAPON_ATTR,
    },
    (weapon_t){"Recover",
                10, MAGIC, 128, 0, 5, 1, 3, 1,
                STAFF, RANK_4, 0, 1, 0, FULL_HEAL, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Restore",
                10, MAGIC, 128, 0, 3, 1, 5, 5,
                STAFF, RANK_4, 0, 1, 0, CURE_ALL, NO_WEAPON_ATTR, NO_WEAPON_ATTR,
    },
    (weapon_t){"Bulk",
                10, MAGIC, 128, 0, 5, 1, 5, 3,
                STAFF, RANK_5, 0, 1, 0, BUFF_DEF, BUFF_RES, BUFF_SPD, 
    },
    (weapon_t){"Cure",
                5, MAGIC, 128, 0, 10, 1, 1, 5,
                STAFF, RANK_5, 0, 1, 0, CURE_ALL, FULL_HEAL, NO_WEAPON_ATTR,
    },


    //93 Basic Light Magic
    (weapon_t){"Spark",
                45, 5 | MAGIC, 85, 0, 4, 1, 2, 0,
                LIGHT_M, RANK_1, 0, 0, 1, NO_WEAPON_ATTR, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Growing Light",
                30, 10 | MAGIC, 80, 25, 12, 1, 1, 0,
                LIGHT_M, RANK_1, 0, 0, 1, SLOW_DRAW, SLOW, AT_LOW_HEALTH | ATT_UP, 
    },
    (weapon_t){"Gleam",
                25, 1 | MAGIC, 90, 5, 15, 1, 2, 0,
                LIGHT_M, RANK_2, 0, 0, 1, IGNORE_DEF, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Counterspell",
                20, 8 | MAGIC, 128, 0, 10, 1, 2, 0,
                LIGHT_M, RANK_2, 0, 0, 1, COUNTER_INF_RANGE, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Ablaze",
                35, 12 | MAGIC, 70, 5, 13, 1, 2, 0,
                LIGHT_M, RANK_3, 0, 0, 1, NO_WEAPON_ATTR, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Flicker",
                40, 8 | MAGIC, 80, 0, 6, 1, 2, 0,
                LIGHT_M, RANK_3, 0, 0, 1, NO_WEAPON_ATTR, NO_WEAPON_ATTR, NO_WEAPON_ATTR,
    },
    (weapon_t){"Purge",
                30, 10 | MAGIC, 80, 5, 8, 1, 2, 0,
                LIGHT_M, RANK_4, 0, 0, 1, E_DARK_M, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Blind",
                35, 8 | MAGIC, 80, 0, 9, 1, 2, 0,
                LIGHT_M, RANK_4, 0, 0, 1, SPLASH, NO_WEAPON_ATTR, NO_WEAPON_ATTR,
    },
    (weapon_t){"Lumina",
                30, 7 | MAGIC, 80, 40, 6, 1, 2, 0,
                LIGHT_M, RANK_5, 0, 0, 1, NO_WEAPON_ATTR, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Blinding Light",
                35, 7 | MAGIC, 75, 25, 12, 1, 1, 0,
                LIGHT_M, RANK_5, 0, 0, 1, FRENZY, NO_WEAPON_ATTR, NO_WEAPON_ATTR,
    },


    //103 Basic Dark Magic
    (weapon_t){"Gloom",
                45, 6 | MAGIC, 80, 0, 5, 1, 2, 0,
                DARK_M, RANK_1, 0, 0, 1, NO_WEAPON_ATTR, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    //CHANGES TERRAIN
    (weapon_t){"Swamp",
                25, 6 | MAGIC, 80, 5, 6, 1, 2, 0,
                DARK_M, RANK_1, 0, 0, 1, TERRAIN_WARP_SWAMP, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Eclipse",
                25, 8 | MAGIC, 70, 5, 7, 1, 2, 0,
                DARK_M, RANK_2, 0, 0, 1, E_LIGHT_M, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Sap",
                30, 5 | MAGIC, 75, 0, 15, 1, 2, 0,
                DARK_M, RANK_2, 0, 0, 1, SAP_HEALTH, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Drench",
                35, 10 | MAGIC, 70, 0, 12, 1, 2, 0,
                DARK_M, RANK_3, 0, 0, 1, TERRAIN_WARP_SWAMP, APP_POISON, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Night",
                30, 6 | MAGIC, 75, 10, 8, 1, 2, 0,
                DARK_M, RANK_3, 0, 0, 1, FRENZY, NO_WEAPON_ATTR, NO_WEAPON_ATTR,
    },
    (weapon_t){"Entrap",
                10, 2 | MAGIC, 60, 0, 12, 1, 4, 0,
                DARK_M, RANK_4, 0, 0, 1, APP_FREEZE, TERRAIN_WARP_SWAMP, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Swarm",
                30, 7 | MAGIC, 75, 5, 7, 1, 2, 0,
                DARK_M, RANK_4, 0, 0, 1, DEBUFF_DEF2, NO_WEAPON_ATTR, NO_WEAPON_ATTR,
    },
    (weapon_t){"Pursue",
                10, 9 | MAGIC, 128, 10, 11, 1, 4, 0,
                DARK_M, RANK_5, 0, 0, 1, NO_WEAPON_ATTR, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Nightmare",
                20, 12 | MAGIC, 65, 25, 14, 1, 2, 0,
                DARK_M, RANK_5, 0, 0, 1, TERRAIN_WARP_SWAMP, AT_LOW_HEALTH | ATT_UP, NO_WEAPON_ATTR,
    },


    //113 Basic heavy weapons
    (weapon_t){"Ballista",
                20, 3, 80, 0, 20, 3, 8, 0,
                HEAVY, RANK_1, 0, 0, 1, E_FLYING, CANNOT_COUNTER, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Haunt",
                8, 3 | MAGIC, 80, 0, 8, 3, 8, 0,
                HEAVY, RANK_1, 0, 0, 1, APP_SILENCE, CANNOT_COUNTER, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Harpoon",
                35, 8, 75, 5, 12, 1, 2, 0,
                HEAVY, RANK_2, 0, 0, 1, E_CAVALRY, E_LANCE, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Drain",
                6, 5 | MAGIC, 45, 0, 15, 3, 8, 0,
                HEAVY, RANK_2, 0, 0, 1, SAP_HEALTH, SET_HP_TO_1, CANNOT_CRIT, 
    },
    (weapon_t){"Elephant",
                10, 10, 60, 25, 20, 3, 8, 0,
                HEAVY, RANK_3, 0, 0, 1, CANNOT_COUNTER, E_FLYING, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Catapult",
                10, 12, 60, 0, 20, 3, 8, 0,
                HEAVY, RANK_3, 0, 0, 1, SLOW, CANNOT_COUNTER, NO_WEAPON_ATTR,
    },
    //todo 4 more ballista ONAGER?
    (weapon_t){"",
                10, 10, 60, 25, 20, 3, 8, 0,
                HEAVY, RANK_4, 0, 0, 1, CANNOT_COUNTER, E_FLYING, NO_WEAPON_ATTR, 
    },
    (weapon_t){"",
                10, 12, 60, 0, 20, 3, 8, 0,
                HEAVY, RANK_4, 0, 0, 1, SLOW, CANNOT_COUNTER, NO_WEAPON_ATTR,
    },
    (weapon_t){"",
                10, 10, 60, 25, 20, 3, 8, 0,
                HEAVY, RANK_5, 0, 0, 1, CANNOT_COUNTER, E_FLYING, NO_WEAPON_ATTR, 
    },
    (weapon_t){"",
                10, 12, 60, 0, 20, 3, 8, 0,
                HEAVY, RANK_5, 0, 0, 1, SLOW, CANNOT_COUNTER, NO_WEAPON_ATTR,
    },


    //123 Basic explosives
    (weapon_t){"Grenade",
                10, 8, 80, 0, 10, 3, 3, 0,
                EXPLOSIVE, RANK_1, 0, 0, 1, CORROSION, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Splash Bomb",
                30, 5, 75, 0, 8, 1, 2, 0,
                EXPLOSIVE, RANK_1, 0, 0, 1, SPLASH, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Meteor",
                6, 8 | MAGIC, 75, 5, 19, 3, 8, 0,
                EXPLOSIVE, RANK_2, 0, 0, 1, SPLASH, NO_WEAPON_ATTR, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Rocket",
                8, 5, 60, 0, 17, 3, 3, 0,
                EXPLOSIVE, RANK_2, 0, 0, 1, CANNOT_COUNTER, SET_HP_TO_1, CANNOT_CRIT, 
    },
    (weapon_t){"Mine",
                35, 7, 80, 25, 8, 1, 1, 0,
                EXPLOSIVE, RANK_3, 0, 0, 1, E_INFANTRY, SPLASH, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Gunpowder trap",
                10, 14, 55, 0, 20, 3, 3, 0,
                EXPLOSIVE, RANK_3, 0, 0, 1, SPLASH, NO_WEAPON_ATTR, NO_WEAPON_ATTR,
    },
    (weapon_t){"Fireball",
                35, 6 | MAGIC, 85, 10, 10, 3, 3, 0,
                EXPLOSIVE, RANK_4, 0, 0, 1, E_ARMOUR, SPLASH, NO_WEAPON_ATTR, 
    },
    (weapon_t){"Muddy bomb",
                15, 4, 128, 0, 6, 3, 3, 0,
                EXPLOSIVE, RANK_4, 0, 0, 1, SPLASH, TERRAIN_WARP_SWAMP, NO_WEAPON_ATTR,
    },
    (weapon_t){"Poison bomb",
                25, 5, 80, 0, 8, 3, 3, 0,
                EXPLOSIVE, RANK_4, 0, 0, 1, CORROSION, SPLASH, APP_POISON, 
    },
    (weapon_t){"Golden bomb",
                15, 10, 65, 20, 13, 3, 3, 0,
                EXPLOSIVE, RANK_4, 0, 0, 1, SPLASH, AT_LOW_HEALTH | FRENZY, NO_WEAPON_ATTR,
    },
};

int main(int argc, char* argv[]){
    action_init(argv[0]);
    FILE* fp = prep_fopen(WEAPONS_FILENAME, "wb");
    fwrite(&weapons, sizeof(weapon_t), WEAPONS_COUNT, fp);
    fclose(fp);
    return 0;
}
